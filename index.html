<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>C칚es Desaparecidos</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>游냤 C칚es Desaparecidos</h1>

  <!-- Login -->
  <div id="loginBox" class="login-box">
    <h2>Login</h2>
    <input type="text" id="usuario" placeholder="Usu치rio" /><br /><br />
    <input type="password" id="senha" placeholder="Senha" /><br /><br />
    <button onclick="fazerLogin()">Entrar</button>
    <p>
      N칚o tem conta?
      <a href="#" onclick="mostrarCadastro()">Cadastre-se aqui</a>
    </p>
  </div>

  <!-- Cadastro -->
  <div id="cadastroBox" class="login-box" style="display:none;">
    <h2>Cadastro</h2>
    <input type="text" id="novoUsuario" placeholder="Novo usu치rio" /><br /><br />
    <input type="password" id="novaSenha" placeholder="Nova senha" /><br /><br />
    <button onclick="fazerCadastro()">Cadastrar</button>
    <p>
      J치 tem conta?
      <a href="#" onclick="mostrarLogin()">Voltar ao login</a>
    </p>
  </div>

  <!-- Conte칰do principal -->
  <div id="conteudoPrincipal" style="display: none;">
    <button id="logout" onclick="fazerLogout()">Sair</button>

    <div class="form">
      <h2>Cadastrar C칚o Desaparecido</h2>
      <input type="text" id="nome" placeholder="Nome do c칚o" required /><br /><br />
      <input
        type="text"
        id="descricao"
        placeholder="Descri칞칚o e 칰ltima localiza칞칚o"
        required
      /><br /><br />
      <input type="text" id="imagem" placeholder="URL da imagem do c칚o" required /><br /><br />
      <button onclick="cadastrarCao()">Cadastrar</button>
    </div>

    <div class="dog-list">
      <h2>C칚es Desaparecidos</h2>
      <div id="listaCaes"></div>
    </div>
  </div>

  <script>
    const listaCaes = document.getElementById("listaCaes");
    let caes = JSON.parse(localStorage.getItem("caesDesaparecidos")) || [];

    function salvarLocalmente() {
      localStorage.setItem("caesDesaparecidos", JSON.stringify(caes));
    }

    function cadastrarCao() {
      const nome = document.getElementById("nome").value;
      const descricao = document.getElementById("descricao").value;
      const imagem = document.getElementById("imagem").value;
      if (nome && descricao && imagem) {
        const cao = {
          nome,
          descricao,
          imagem,
          localizacoes: [],
        };
        caes.push(cao);
        salvarLocalmente();
        atualizarLista();
        document.getElementById("nome").value = "";
        document.getElementById("descricao").value = "";
        document.getElementById("imagem").value = "";
      } else {
        alert("Preencha todos os campos para cadastrar o c칚o.");
      }
    }

    function atualizarLista() {
      listaCaes.innerHTML = "";
      caes.forEach((cao, index) => {
        const div = document.createElement("div");
        div.className = "dog-card";
        div.innerHTML = `
          <strong>${cao.nome}</strong><br>
          ${cao.descricao}<br>
          <img src="${cao.imagem}" alt="Imagem do c칚o"><br>
          <button onclick="adicionarLocalizacao(${index})">Avisar poss칤vel localiza칞칚o</button>
          <button onclick="confirmarAchado(${index})">Anunciar que foi encontrado</button>
          <div><strong>Localiza칞칫es:</strong> ${cao.localizacoes.join(", ")}</div>
        `;
        listaCaes.appendChild(div);
      });
    }

    function adicionarLocalizacao(index) {
      const local = prompt("Digite onde o c칚o foi visto:");
      if (local) {
        caes[index].localizacoes.push(local);
        salvarLocalmente();
        atualizarLista();
      }
    }

    function confirmarAchado(index) {
      if (
        confirm(`Voc칡 tem certeza que o c칚o ${caes[index].nome} foi encontrado?`)
      ) {
        caes.splice(index, 1);
        salvarLocalmente();
        atualizarLista();
      }
    }

    // Login e Cadastro
    function mostrarCadastro() {
      document.getElementById("loginBox").style.display = "none";
      document.getElementById("cadastroBox").style.display = "block";
    }

    function mostrarLogin() {
      document.getElementById("cadastroBox").style.display = "none";
      document.getElementById("loginBox").style.display = "block";
    }

    function fazerCadastro() {
      const novoUsuario = document.getElementById("novoUsuario").value.trim();
      const novaSenha = document.getElementById("novaSenha").value.trim();

      if (!novoUsuario || !novaSenha) {
        alert("Preencha todos os campos para cadastro.");
        return;
      }

      let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
      if (usuarios.find((u) => u.usuario === novoUsuario)) {
        alert("Usu치rio j치 existe. Escolha outro nome.");
        return;
      }

      usuarios.push({ usuario: novoUsuario, senha: novaSenha });
      localStorage.setItem("usuarios", JSON.stringify(usuarios));
      alert("Usu치rio cadastrado com sucesso! Fa칞a login.");
      mostrarLogin();
    }

    let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [
      { usuario: "admin", senha: "1234" },
      { usuario: "teste", senha: "abcd" },
    ];
    localStorage.setItem("usuarios", JSON.stringify(usuarios));

    function fazerLogin() {
      const user = document.getElementById("usuario").value.trim();
      const pass = document.getElementById("senha").value.trim();

      const encontrado = usuarios.find(
        (u) => u.usuario === user && u.senha === pass
      );

      if (encontrado) {
        localStorage.setItem("logado", "true");
        mostrarConteudo();
      } else {
        alert("Usu치rio ou senha incorretos.");
      }
    }

    function fazerLogout() {
      localStorage.removeItem("logado");
      document.getElementById("conteudoPrincipal").style.display = "none";
      document.getElementById("loginBox").style.display = "block";
    }

    function mostrarConteudo() {
      document.getElementById("loginBox").style.display = "none";
      document.getElementById("cadastroBox").style.display = "none";
      document.getElementById("conteudoPrincipal").style.display = "block";
      atualizarLista();
    }

    // Verifica se j치 est치 logado
    if (localStorage.getItem("logado") === "true") {
      mostrarConteudo();
    }
  </script>
</body>
</html>
